{
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "images_acluster_ds4ts_name": {
            "defaultValue": "acluster-ds4ts",
            "type": "String"
        },
        "loadBalancers_acluster_ds4ts_name": {
            "defaultValue": "acluster-ds4ts",
            "type": "String"
        },
        "storageAccounts_clusterydufh_name": {
            "defaultValue": "clusterydufh",
            "type": "String"
        },
        "virtualNetworks_acluster_ds4ts_vnet_name": {
            "defaultValue": "acluster-ds4ts-vnet",
            "type": "String"
        },
        "loadBalancers_acluster_ds4ts_internal_name": {
            "defaultValue": "acluster-ds4ts-internal",
            "type": "String"
        },
        "virtualMachines_acluster_ds4ts_master_0_name": {
            "defaultValue": "acluster-ds4ts-master-0",
            "type": "String"
        },
        "virtualMachines_acluster_ds4ts_master_1_name": {
            "defaultValue": "acluster-ds4ts-master-1",
            "type": "String"
        },
        "virtualMachines_acluster_ds4ts_master_2_name": {
            "defaultValue": "acluster-ds4ts-master-2",
            "type": "String"
        },
        "publicIPAddresses_acluster_ds4ts_pip_v4_name": {
            "defaultValue": "acluster-ds4ts-pip-v4",
            "type": "String"
        },
        "networkSecurityGroups_acluster_ds4ts_nsg_name": {
            "defaultValue": "acluster-ds4ts-nsg",
            "type": "String"
        },
        "storageAccounts_imageregistryaclustkm4s8_name": {
            "defaultValue": "imageregistryaclustkm4s8",
            "type": "String"
        },
        "networkInterfaces_acluster_ds4ts_master0_nic_name": {
            "defaultValue": "acluster-ds4ts-master0-nic",
            "type": "String"
        },
        "networkInterfaces_acluster_ds4ts_master1_nic_name": {
            "defaultValue": "acluster-ds4ts-master1-nic",
            "type": "String"
        },
        "networkInterfaces_acluster_ds4ts_master2_nic_name": {
            "defaultValue": "acluster-ds4ts-master2-nic",
            "type": "String"
        },
        "privateDnsZones_acluster_ocp_devenchoice_org_name": {
            "defaultValue": "acluster.ocp.devenchoice.org",
            "type": "String"
        },
        "virtualMachines_acluster_ds4ts_infra_eastus1_bj4gj_name": {
            "defaultValue": "acluster-ds4ts-infra-eastus1-bj4gj",
            "type": "String"
        },
        "virtualMachines_acluster_ds4ts_worker_eastus1_thpfl_name": {
            "defaultValue": "acluster-ds4ts-worker-eastus1-thpfl",
            "type": "String"
        },
        "virtualMachines_acluster_ds4ts_worker_eastus2_wpbg4_name": {
            "defaultValue": "acluster-ds4ts-worker-eastus2-wpbg4",
            "type": "String"
        },
        "userAssignedIdentities_acluster_ds4ts_identity_name": {
            "defaultValue": "acluster-ds4ts-identity",
            "type": "String"
        },
        "networkInterfaces_acluster_ds4ts_infra_eastus1_bj4gj_nic_name": {
            "defaultValue": "acluster-ds4ts-infra-eastus1-bj4gj-nic",
            "type": "String"
        },
        "networkInterfaces_acluster_ds4ts_worker_eastus1_thpfl_nic_name": {
            "defaultValue": "acluster-ds4ts-worker-eastus1-thpfl-nic",
            "type": "String"
        },
        "networkInterfaces_acluster_ds4ts_worker_eastus2_wpbg4_nic_name": {
            "defaultValue": "acluster-ds4ts-worker-eastus2-wpbg4-nic",
            "type": "String"
        },
        "publicIPAddresses_acluster_ds4ts_adc7cefced2ea48948caa180bdc31545_name": {
            "defaultValue": "acluster-ds4ts-adc7cefced2ea48948caa180bdc31545",
            "type": "String"
        }
    },
    "variables": {},
    "resources": [
        {
            "type": "Microsoft.ManagedIdentity/userAssignedIdentities",
            "apiVersion": "2018-11-30",
            "name": "[parameters('userAssignedIdentities_acluster_ds4ts_identity_name')]",
            "location": "eastus"
        },
        {
            "type": "Microsoft.Network/networkSecurityGroups",
            "apiVersion": "2020-11-01",
            "name": "[parameters('networkSecurityGroups_acluster_ds4ts_nsg_name')]",
            "location": "eastus",
            "properties": {
                "securityRules": [
                    {
                        "name": "apiserver_in",
                        "properties": {
                            "protocol": "Tcp",
                            "sourcePortRange": "*",
                            "destinationPortRange": "6443",
                            "sourceAddressPrefix": "*",
                            "destinationAddressPrefix": "*",
                            "access": "Allow",
                            "priority": 101,
                            "direction": "Inbound",
                            "sourcePortRanges": [],
                            "destinationPortRanges": [],
                            "sourceAddressPrefixes": [],
                            "destinationAddressPrefixes": []
                        }
                    },
                    {
                        "name": "adc7cefced2ea48948caa180bdc31545-TCP-80-Internet",
                        "properties": {
                            "protocol": "Tcp",
                            "sourcePortRange": "*",
                            "destinationPortRange": "80",
                            "sourceAddressPrefix": "Internet",
                            "destinationAddressPrefix": "20.75.208.52",
                            "access": "Allow",
                            "priority": 500,
                            "direction": "Inbound",
                            "sourcePortRanges": [],
                            "destinationPortRanges": [],
                            "sourceAddressPrefixes": [],
                            "destinationAddressPrefixes": []
                        }
                    },
                    {
                        "name": "adc7cefced2ea48948caa180bdc31545-TCP-443-Internet",
                        "properties": {
                            "protocol": "Tcp",
                            "sourcePortRange": "*",
                            "destinationPortRange": "443",
                            "sourceAddressPrefix": "Internet",
                            "destinationAddressPrefix": "20.75.208.52",
                            "access": "Allow",
                            "priority": 501,
                            "direction": "Inbound",
                            "sourcePortRanges": [],
                            "destinationPortRanges": [],
                            "sourceAddressPrefixes": [],
                            "destinationAddressPrefixes": []
                        }
                    }
                ]
            }
        },
        {
            "type": "Microsoft.Network/privateDnsZones",
            "apiVersion": "2018-09-01",
            "name": "[parameters('privateDnsZones_acluster_ocp_devenchoice_org_name')]",
            "location": "global",
            "properties": {
                "maxNumberOfRecordSets": 25000,
                "maxNumberOfVirtualNetworkLinks": 1000,
                "maxNumberOfVirtualNetworkLinksWithRegistration": 100,
                "numberOfRecordSets": 4,
                "numberOfVirtualNetworkLinks": 1,
                "numberOfVirtualNetworkLinksWithRegistration": 0,
                "provisioningState": "Succeeded"
            }
        },
        {
            "type": "Microsoft.Network/publicIPAddresses",
            "apiVersion": "2020-11-01",
            "name": "[parameters('publicIPAddresses_acluster_ds4ts_adc7cefced2ea48948caa180bdc31545_name')]",
            "location": "eastus",
            "tags": {
                "kubernetes-cluster-name": "acluster-ds4ts",
                "service": "openshift-ingress/router-default"
            },
            "sku": {
                "name": "Standard",
                "tier": "Regional"
            },
            "zones": [
                "1",
                "2",
                "3"
            ],
            "properties": {
                "ipAddress": "20.75.208.52",
                "publicIPAddressVersion": "IPv4",
                "publicIPAllocationMethod": "Static",
                "idleTimeoutInMinutes": 4,
                "ipTags": []
            }
        },
        {
            "type": "Microsoft.Network/publicIPAddresses",
            "apiVersion": "2020-11-01",
            "name": "[parameters('publicIPAddresses_acluster_ds4ts_pip_v4_name')]",
            "location": "eastus",
            "sku": {
                "name": "Standard",
                "tier": "Regional"
            },
            "zones": [
                "1",
                "2",
                "3"
            ],
            "properties": {
                "ipAddress": "20.75.158.232",
                "publicIPAddressVersion": "IPv4",
                "publicIPAllocationMethod": "Static",
                "idleTimeoutInMinutes": 4,
                "dnsSettings": {
                    "domainNameLabel": "acluster-ds4ts",
                    "fqdn": "acluster-ds4ts.eastus.cloudapp.azure.com"
                },
                "ipTags": []
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts",
            "apiVersion": "2021-01-01",
            "name": "[parameters('storageAccounts_clusterydufh_name')]",
            "location": "eastus",
            "sku": {
                "name": "Standard_LRS",
                "tier": "Standard"
            },
            "kind": "StorageV2",
            "properties": {
                "isHnsEnabled": false,
                "networkAcls": {
                    "bypass": "AzureServices",
                    "virtualNetworkRules": [],
                    "ipRules": [],
                    "defaultAction": "Allow"
                },
                "supportsHttpsTrafficOnly": true,
                "encryption": {
                    "services": {
                        "file": {
                            "keyType": "Account",
                            "enabled": true
                        },
                        "blob": {
                            "keyType": "Account",
                            "enabled": true
                        }
                    },
                    "keySource": "Microsoft.Storage"
                },
                "accessTier": "Hot"
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts",
            "apiVersion": "2021-01-01",
            "name": "[parameters('storageAccounts_imageregistryaclustkm4s8_name')]",
            "location": "eastus",
            "sku": {
                "name": "Standard_LRS",
                "tier": "Standard"
            },
            "kind": "Storage",
            "properties": {
                "networkAcls": {
                    "bypass": "AzureServices",
                    "virtualNetworkRules": [],
                    "ipRules": [],
                    "defaultAction": "Allow"
                },
                "supportsHttpsTrafficOnly": true,
                "encryption": {
                    "services": {
                        "file": {
                            "keyType": "Account",
                            "enabled": true
                        },
                        "blob": {
                            "keyType": "Account",
                            "enabled": true
                        }
                    },
                    "keySource": "Microsoft.Storage"
                }
            }
        },
        {
            "type": "Microsoft.Compute/images",
            "apiVersion": "2020-12-01",
            "name": "[parameters('images_acluster_ds4ts_name')]",
            "location": "eastus",
            "dependsOn": [
                "[resourceId('Microsoft.Storage/StorageAccounts', parameters('storageAccounts_clusterydufh_name'))]"
            ],
            "properties": {
                "storageProfile": {
                    "osDisk": {
                        "osType": "Linux",
                        "osState": "Generalized",
                        "diskSizeGB": 16,
                        "blobUri": "[concat('https://', parameters('storageAccounts_clusterydufh_name'), '.blob.core.windows.net/vhd/rhcosydufh.vhd')]",
                        "caching": "None",
                        "storageAccountType": "Standard_LRS"
                    },
                    "dataDisks": [],
                    "zoneResilient": false
                },
                "hyperVGeneration": "V1"
            }
        },
        {
            "type": "Microsoft.Network/loadBalancers/backendAddressPools",
            "apiVersion": "2020-11-01",
            "name": "[concat(parameters('loadBalancers_acluster_ds4ts_name'), '/', parameters('loadBalancers_acluster_ds4ts_name'))]",
            "dependsOn": [
                "[resourceId('Microsoft.Network/loadBalancers', parameters('loadBalancers_acluster_ds4ts_name'))]"
            ],
            "properties": {
                "loadBalancerBackendAddresses": [
                    {
                        "name": "acluster-ds4ts-rg_acluster-ds4ts-master1-nicpipConfig",
                        "properties": {}
                    },
                    {
                        "name": "acluster-ds4ts-rg_acluster-ds4ts-master0-nicpipConfig",
                        "properties": {}
                    },
                    {
                        "name": "acluster-ds4ts-rg_acluster-ds4ts-master2-nicpipConfig",
                        "properties": {}
                    },
                    {
                        "name": "acluster-ds4ts-rg_acluster-ds4ts-worker-eastus1-thpfl-nicpipConfig",
                        "properties": {}
                    },
                    {
                        "name": "acluster-ds4ts-rg_acluster-ds4ts-worker-eastus2-wpbg4-nicpipConfig",
                        "properties": {}
                    },
                    {
                        "name": "acluster-ds4ts-rg_acluster-ds4ts-infra-eastus1-bj4gj-nicpipConfig",
                        "properties": {}
                    }
                ]
            }
        },
        {
            "type": "Microsoft.Network/loadBalancers/backendAddressPools",
            "apiVersion": "2020-11-01",
            "name": "[concat(parameters('loadBalancers_acluster_ds4ts_internal_name'), '/acluster-ds4ts')]",
            "dependsOn": [
                "[resourceId('Microsoft.Network/loadBalancers', parameters('loadBalancers_acluster_ds4ts_internal_name'))]"
            ],
            "properties": {
                "loadBalancerBackendAddresses": [
                    {
                        "name": "acluster-ds4ts-rg_acluster-ds4ts-master2-nicpipConfig",
                        "properties": {}
                    },
                    {
                        "name": "acluster-ds4ts-rg_acluster-ds4ts-master0-nicpipConfig",
                        "properties": {}
                    },
                    {
                        "name": "acluster-ds4ts-rg_acluster-ds4ts-master1-nicpipConfig",
                        "properties": {}
                    }
                ]
            }
        },
        {
            "type": "Microsoft.Network/networkSecurityGroups/securityRules",
            "apiVersion": "2020-11-01",
            "name": "[concat(parameters('networkSecurityGroups_acluster_ds4ts_nsg_name'), '/adc7cefced2ea48948caa180bdc31545-TCP-443-Internet')]",
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('networkSecurityGroups_acluster_ds4ts_nsg_name'))]"
            ],
            "properties": {
                "protocol": "Tcp",
                "sourcePortRange": "*",
                "destinationPortRange": "443",
                "sourceAddressPrefix": "Internet",
                "destinationAddressPrefix": "20.75.208.52",
                "access": "Allow",
                "priority": 501,
                "direction": "Inbound",
                "sourcePortRanges": [],
                "destinationPortRanges": [],
                "sourceAddressPrefixes": [],
                "destinationAddressPrefixes": []
            }
        },
        {
            "type": "Microsoft.Network/networkSecurityGroups/securityRules",
            "apiVersion": "2020-11-01",
            "name": "[concat(parameters('networkSecurityGroups_acluster_ds4ts_nsg_name'), '/adc7cefced2ea48948caa180bdc31545-TCP-80-Internet')]",
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('networkSecurityGroups_acluster_ds4ts_nsg_name'))]"
            ],
            "properties": {
                "protocol": "Tcp",
                "sourcePortRange": "*",
                "destinationPortRange": "80",
                "sourceAddressPrefix": "Internet",
                "destinationAddressPrefix": "20.75.208.52",
                "access": "Allow",
                "priority": 500,
                "direction": "Inbound",
                "sourcePortRanges": [],
                "destinationPortRanges": [],
                "sourceAddressPrefixes": [],
                "destinationAddressPrefixes": []
            }
        },
        {
            "type": "Microsoft.Network/networkSecurityGroups/securityRules",
            "apiVersion": "2020-11-01",
            "name": "[concat(parameters('networkSecurityGroups_acluster_ds4ts_nsg_name'), '/apiserver_in')]",
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('networkSecurityGroups_acluster_ds4ts_nsg_name'))]"
            ],
            "properties": {
                "protocol": "Tcp",
                "sourcePortRange": "*",
                "destinationPortRange": "6443",
                "sourceAddressPrefix": "*",
                "destinationAddressPrefix": "*",
                "access": "Allow",
                "priority": 101,
                "direction": "Inbound",
                "sourcePortRanges": [],
                "destinationPortRanges": [],
                "sourceAddressPrefixes": [],
                "destinationAddressPrefixes": []
            }
        },
        {
            "type": "Microsoft.Network/privateDnsZones/A",
            "apiVersion": "2018-09-01",
            "name": "[concat(parameters('privateDnsZones_acluster_ocp_devenchoice_org_name'), '/*.apps')]",
            "dependsOn": [
                "[resourceId('Microsoft.Network/privateDnsZones', parameters('privateDnsZones_acluster_ocp_devenchoice_org_name'))]"
            ],
            "properties": {
                "ttl": 30,
                "aRecords": [
                    {
                        "ipv4Address": "20.75.208.52"
                    }
                ]
            }
        },
        {
            "type": "Microsoft.Network/privateDnsZones/A",
            "apiVersion": "2018-09-01",
            "name": "[concat(parameters('privateDnsZones_acluster_ocp_devenchoice_org_name'), '/api')]",
            "dependsOn": [
                "[resourceId('Microsoft.Network/privateDnsZones', parameters('privateDnsZones_acluster_ocp_devenchoice_org_name'))]"
            ],
            "properties": {
                "metadata": {},
                "ttl": 300,
                "aRecords": [
                    {
                        "ipv4Address": "10.0.0.6"
                    }
                ]
            }
        },
        {
            "type": "Microsoft.Network/privateDnsZones/A",
            "apiVersion": "2018-09-01",
            "name": "[concat(parameters('privateDnsZones_acluster_ocp_devenchoice_org_name'), '/api-int')]",
            "dependsOn": [
                "[resourceId('Microsoft.Network/privateDnsZones', parameters('privateDnsZones_acluster_ocp_devenchoice_org_name'))]"
            ],
            "properties": {
                "metadata": {},
                "ttl": 300,
                "aRecords": [
                    {
                        "ipv4Address": "10.0.0.6"
                    }
                ]
            }
        },
        {
            "type": "Microsoft.Network/privateDnsZones/SOA",
            "apiVersion": "2018-09-01",
            "name": "[concat(parameters('privateDnsZones_acluster_ocp_devenchoice_org_name'), '/@')]",
            "dependsOn": [
                "[resourceId('Microsoft.Network/privateDnsZones', parameters('privateDnsZones_acluster_ocp_devenchoice_org_name'))]"
            ],
            "properties": {
                "ttl": 3600,
                "soaRecord": {
                    "email": "azureprivatedns-host.microsoft.com",
                    "expireTime": 2419200,
                    "host": "azureprivatedns.net",
                    "minimumTtl": 10,
                    "refreshTime": 3600,
                    "retryTime": 300,
                    "serialNumber": 1
                }
            }
        },
        {
            "type": "Microsoft.Network/virtualNetworks",
            "apiVersion": "2020-11-01",
            "name": "[parameters('virtualNetworks_acluster_ds4ts_vnet_name')]",
            "location": "eastus",
            "dependsOn": [
                "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('networkSecurityGroups_acluster_ds4ts_nsg_name'))]"
            ],
            "properties": {
                "addressSpace": {
                    "addressPrefixes": [
                        "10.0.0.0/16"
                    ]
                },
                "dhcpOptions": {
                    "dnsServers": []
                },
                "subnets": [
                    {
                        "name": "acluster-ds4ts-master-subnet",
                        "properties": {
                            "addressPrefix": "10.0.0.0/19",
                            "networkSecurityGroup": {
                                "id": "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('networkSecurityGroups_acluster_ds4ts_nsg_name'))]"
                            },
                            "serviceEndpoints": [],
                            "delegations": [],
                            "privateEndpointNetworkPolicies": "Enabled",
                            "privateLinkServiceNetworkPolicies": "Enabled"
                        }
                    },
                    {
                        "name": "acluster-ds4ts-worker-subnet",
                        "properties": {
                            "addressPrefix": "10.0.32.0/19",
                            "networkSecurityGroup": {
                                "id": "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('networkSecurityGroups_acluster_ds4ts_nsg_name'))]"
                            },
                            "serviceEndpoints": [],
                            "delegations": [],
                            "privateEndpointNetworkPolicies": "Enabled",
                            "privateLinkServiceNetworkPolicies": "Enabled"
                        }
                    }
                ],
                "virtualNetworkPeerings": [],
                "enableDdosProtection": false
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts/blobServices",
            "apiVersion": "2021-01-01",
            "name": "[concat(parameters('storageAccounts_clusterydufh_name'), '/default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_clusterydufh_name'))]"
            ],
            "sku": {
                "name": "Standard_LRS",
                "tier": "Standard"
            },
            "properties": {
                "cors": {
                    "corsRules": []
                },
                "deleteRetentionPolicy": {
                    "enabled": false
                }
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts/blobServices",
            "apiVersion": "2021-01-01",
            "name": "[concat(parameters('storageAccounts_imageregistryaclustkm4s8_name'), '/default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_imageregistryaclustkm4s8_name'))]"
            ],
            "sku": {
                "name": "Standard_LRS",
                "tier": "Standard"
            },
            "properties": {
                "cors": {
                    "corsRules": []
                },
                "deleteRetentionPolicy": {
                    "enabled": false
                }
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts/fileServices",
            "apiVersion": "2021-01-01",
            "name": "[concat(parameters('storageAccounts_clusterydufh_name'), '/default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_clusterydufh_name'))]"
            ],
            "sku": {
                "name": "Standard_LRS",
                "tier": "Standard"
            },
            "properties": {
                "protocolSettings": {
                    "smb": {}
                },
                "cors": {
                    "corsRules": []
                },
                "shareDeleteRetentionPolicy": {
                    "enabled": true,
                    "days": 7
                }
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts/fileServices",
            "apiVersion": "2021-01-01",
            "name": "[concat(parameters('storageAccounts_imageregistryaclustkm4s8_name'), '/default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_imageregistryaclustkm4s8_name'))]"
            ],
            "sku": {
                "name": "Standard_LRS",
                "tier": "Standard"
            },
            "properties": {
                "protocolSettings": {
                    "smb": {}
                },
                "cors": {
                    "corsRules": []
                },
                "shareDeleteRetentionPolicy": {
                    "enabled": true,
                    "days": 7
                }
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts/queueServices",
            "apiVersion": "2021-01-01",
            "name": "[concat(parameters('storageAccounts_clusterydufh_name'), '/default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_clusterydufh_name'))]"
            ],
            "properties": {
                "cors": {
                    "corsRules": []
                }
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts/queueServices",
            "apiVersion": "2021-01-01",
            "name": "[concat(parameters('storageAccounts_imageregistryaclustkm4s8_name'), '/default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_imageregistryaclustkm4s8_name'))]"
            ],
            "properties": {
                "cors": {
                    "corsRules": []
                }
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts/tableServices",
            "apiVersion": "2021-01-01",
            "name": "[concat(parameters('storageAccounts_clusterydufh_name'), '/default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_clusterydufh_name'))]"
            ],
            "properties": {
                "cors": {
                    "corsRules": []
                }
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts/tableServices",
            "apiVersion": "2021-01-01",
            "name": "[concat(parameters('storageAccounts_imageregistryaclustkm4s8_name'), '/default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_imageregistryaclustkm4s8_name'))]"
            ],
            "properties": {
                "cors": {
                    "corsRules": []
                }
            }
        },
        {
            "type": "Microsoft.Compute/virtualMachines",
            "apiVersion": "2020-12-01",
            "name": "[parameters('virtualMachines_acluster_ds4ts_infra_eastus1_bj4gj_name')]",
            "location": "eastus",
            "dependsOn": [
                "[resourceId('Microsoft.Compute/images', parameters('images_acluster_ds4ts_name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', parameters('networkInterfaces_acluster_ds4ts_infra_eastus1_bj4gj_nic_name'))]"
            ],
            "tags": {
                "kubernetes.io-cluster-acluster-ds4ts": "owned"
            },
            "zones": [
                "1"
            ],
            "identity": {
                "type": "UserAssigned",
                "userAssignedIdentities": {
                    "/subscriptions/26b2efed-ae4f-4b8d-85ee-da05163f3f4c/resourcegroups/acluster-ds4ts-rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/acluster-ds4ts-identity": {
                        "principalId": "ca584c9a-0413-479b-bdc3-8c69f02434db",
                        "clientId": "821116bd-8527-4249-af14-71d1baf097b5"
                    }
                }
            },
            "properties": {
                "hardwareProfile": {
                    "vmSize": "Standard_D2s_v4"
                },
                "storageProfile": {
                    "imageReference": {
                        "id": "[resourceId('Microsoft.Compute/images', parameters('images_acluster_ds4ts_name'))]"
                    },
                    "osDisk": {
                        "osType": "Linux",
                        "name": "[concat(parameters('virtualMachines_acluster_ds4ts_infra_eastus1_bj4gj_name'), '_OSDisk')]",
                        "createOption": "FromImage",
                        "caching": "None",
                        "managedDisk": {
                            "storageAccountType": "Premium_LRS",
                            "id": "[resourceId('Microsoft.Compute/disks', concat(parameters('virtualMachines_acluster_ds4ts_infra_eastus1_bj4gj_name'), '_OSDisk'))]"
                        },
                        "diskSizeGB": 100
                    },
                    "dataDisks": []
                },
                "osProfile": {
                    "computerName": "[parameters('virtualMachines_acluster_ds4ts_infra_eastus1_bj4gj_name')]",
                    "adminUsername": "capi",
                    "linuxConfiguration": {
                        "disablePasswordAuthentication": true,
                        "ssh": {
                            "publicKeys": [
                                {
                                    "path": "/home/capi/.ssh/authorized_keys",
                                    "keyData": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCtid8u9i95Aioln2hvn+nuaBPziOvnJyjH0PCCwgCrYGYx1MUhwGY7Gwgo9RmJ3TPwDSbA/bS3BZrtLhQTlO/XZIJfqEBCYaHmm/5dUkVQ+JPd2R2l2ypIpCM52Cz0Qa35Hn27LOB73wXzKfFlLI4UtwpRPMRKRGFT4spi5is+orpWERmHgn0wNIU+xZ5U1DeRfmsX4A+mkc91mJD4f2HuOWOzZjvGrUVtFqXmiWnprbOO2J6FTLM8d0FSvegMkmaEJAcultFv2OxCHOt+uKlHNgyUJ8gvBBJIme0rrI0y7b/nXnLjXHMNIWTx4CJnZfDKuIfi3qcSepqTYjcj4bwB\n"
                                }
                            ]
                        },
                        "provisionVMAgent": true,
                        "patchSettings": {
                            "patchMode": "ImageDefault"
                        }
                    },
                    "secrets": [],
                    "allowExtensionOperations": true,
                    "requireGuestProvisionSignal": true
                },
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', parameters('networkInterfaces_acluster_ds4ts_infra_eastus1_bj4gj_nic_name'))]",
                            "properties": {
                                "primary": true
                            }
                        }
                    ]
                }
            }
        },
        {
            "type": "Microsoft.Compute/virtualMachines",
            "apiVersion": "2020-12-01",
            "name": "[parameters('virtualMachines_acluster_ds4ts_worker_eastus1_thpfl_name')]",
            "location": "eastus",
            "dependsOn": [
                "[resourceId('Microsoft.Compute/images', parameters('images_acluster_ds4ts_name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', parameters('networkInterfaces_acluster_ds4ts_worker_eastus1_thpfl_nic_name'))]"
            ],
            "tags": {
                "kubernetes.io-cluster-acluster-ds4ts": "owned"
            },
            "zones": [
                "1"
            ],
            "identity": {
                "type": "UserAssigned",
                "userAssignedIdentities": {
                    "/subscriptions/26b2efed-ae4f-4b8d-85ee-da05163f3f4c/resourcegroups/acluster-ds4ts-rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/acluster-ds4ts-identity": {
                        "principalId": "ca584c9a-0413-479b-bdc3-8c69f02434db",
                        "clientId": "821116bd-8527-4249-af14-71d1baf097b5"
                    }
                }
            },
            "properties": {
                "hardwareProfile": {
                    "vmSize": "Standard_D2s_v4"
                },
                "storageProfile": {
                    "imageReference": {
                        "id": "[resourceId('Microsoft.Compute/images', parameters('images_acluster_ds4ts_name'))]"
                    },
                    "osDisk": {
                        "osType": "Linux",
                        "name": "[concat(parameters('virtualMachines_acluster_ds4ts_worker_eastus1_thpfl_name'), '_OSDisk')]",
                        "createOption": "FromImage",
                        "caching": "None",
                        "managedDisk": {
                            "storageAccountType": "Premium_LRS",
                            "id": "[resourceId('Microsoft.Compute/disks', concat(parameters('virtualMachines_acluster_ds4ts_worker_eastus1_thpfl_name'), '_OSDisk'))]"
                        },
                        "diskSizeGB": 100
                    },
                    "dataDisks": []
                },
                "osProfile": {
                    "computerName": "[parameters('virtualMachines_acluster_ds4ts_worker_eastus1_thpfl_name')]",
                    "adminUsername": "capi",
                    "linuxConfiguration": {
                        "disablePasswordAuthentication": true,
                        "ssh": {
                            "publicKeys": [
                                {
                                    "path": "/home/capi/.ssh/authorized_keys",
                                    "keyData": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDTqbUI+x4MIdF3oP0fX5gJpAXJ5uTkQ3MonczLgAqmgZEvTY0nNlmUjH1me4TvW+hwebbEoJ5Hp2mBND4cTRnbx7kz/cMIZtPz/eKEYR/NQUG61Z/lc4fG3CJzX2uMkfuCx95hFmAj6ytzeoih6vXhdnx20sM8BzJncW2ZcWws2aR031Lm8mFPpkqQ6JzTHdTCd1ripozoJk9cwTSKNywRNu9krRYa12q1tzzkKotWlVtJ4ae1gI5CjApkfogRdpKUH0gCAOT/3wTu6zK6HbmWd9w7k4xcy7iZYWP8+ChrGFl7vW4Rvq1hsZAk+lGiv5wViIgzN4tqFoBK/LpVXQSd\n"
                                }
                            ]
                        },
                        "provisionVMAgent": true,
                        "patchSettings": {
                            "patchMode": "ImageDefault"
                        }
                    },
                    "secrets": [],
                    "allowExtensionOperations": true,
                    "requireGuestProvisionSignal": true
                },
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', parameters('networkInterfaces_acluster_ds4ts_worker_eastus1_thpfl_nic_name'))]",
                            "properties": {
                                "primary": true
                            }
                        }
                    ]
                }
            }
        },
        {
            "type": "Microsoft.Compute/virtualMachines",
            "apiVersion": "2020-12-01",
            "name": "[parameters('virtualMachines_acluster_ds4ts_worker_eastus2_wpbg4_name')]",
            "location": "eastus",
            "dependsOn": [
                "[resourceId('Microsoft.Compute/images', parameters('images_acluster_ds4ts_name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', parameters('networkInterfaces_acluster_ds4ts_worker_eastus2_wpbg4_nic_name'))]"
            ],
            "tags": {
                "kubernetes.io-cluster-acluster-ds4ts": "owned"
            },
            "zones": [
                "2"
            ],
            "identity": {
                "type": "UserAssigned",
                "userAssignedIdentities": {
                    "/subscriptions/26b2efed-ae4f-4b8d-85ee-da05163f3f4c/resourcegroups/acluster-ds4ts-rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/acluster-ds4ts-identity": {
                        "principalId": "ca584c9a-0413-479b-bdc3-8c69f02434db",
                        "clientId": "821116bd-8527-4249-af14-71d1baf097b5"
                    }
                }
            },
            "properties": {
                "hardwareProfile": {
                    "vmSize": "Standard_D2s_v4"
                },
                "storageProfile": {
                    "imageReference": {
                        "id": "[resourceId('Microsoft.Compute/images', parameters('images_acluster_ds4ts_name'))]"
                    },
                    "osDisk": {
                        "osType": "Linux",
                        "name": "[concat(parameters('virtualMachines_acluster_ds4ts_worker_eastus2_wpbg4_name'), '_OSDisk')]",
                        "createOption": "FromImage",
                        "caching": "None",
                        "managedDisk": {
                            "storageAccountType": "Premium_LRS",
                            "id": "[resourceId('Microsoft.Compute/disks', concat(parameters('virtualMachines_acluster_ds4ts_worker_eastus2_wpbg4_name'), '_OSDisk'))]"
                        },
                        "diskSizeGB": 100
                    },
                    "dataDisks": []
                },
                "osProfile": {
                    "computerName": "[parameters('virtualMachines_acluster_ds4ts_worker_eastus2_wpbg4_name')]",
                    "adminUsername": "capi",
                    "linuxConfiguration": {
                        "disablePasswordAuthentication": true,
                        "ssh": {
                            "publicKeys": [
                                {
                                    "path": "/home/capi/.ssh/authorized_keys",
                                    "keyData": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCkDKnyda2rlmn/ZidYQH2hEtgvfI45kHGXJmQkklVHCkZCLp1q96LfHn55jbhNO5BKyJ1rycJW4KrYQdxNfRSxmPfyrXr2RtaZcr+nujvnrZQ1GN9AyGe05t2oEI49T1YGsljRdG17CJZwJLhpmaqp9Qnv2dQ+3ZTKdkNi7OgOwYgAGR2cxdvyr8HbMbXtqfVBogpr8IhpvgSeFOsdbiMYKYX2YSZMxW5CHad4V0Ecg+NBag49EDJ7zkp1+9uTC76h4n2JbcmUT059NyRopcvQVgQjR9pw44iFSNLu8XCZfvNVVGX1CXYJ8Jh1PJ1Wm1gJ1ZVSnzB0dxPLNlPMbwkT\n"
                                }
                            ]
                        },
                        "provisionVMAgent": true,
                        "patchSettings": {
                            "patchMode": "ImageDefault"
                        }
                    },
                    "secrets": [],
                    "allowExtensionOperations": true,
                    "requireGuestProvisionSignal": true
                },
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', parameters('networkInterfaces_acluster_ds4ts_worker_eastus2_wpbg4_nic_name'))]",
                            "properties": {
                                "primary": true
                            }
                        }
                    ]
                }
            }
        },
        {
            "type": "Microsoft.Network/loadBalancers",
            "apiVersion": "2020-11-01",
            "name": "[parameters('loadBalancers_acluster_ds4ts_internal_name')]",
            "location": "eastus",
            "dependsOn": [
                "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_acluster_ds4ts_vnet_name'), 'acluster-ds4ts-master-subnet')]",
                "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_internal_name'), 'acluster-ds4ts')]"
            ],
            "sku": {
                "name": "Standard",
                "tier": "Regional"
            },
            "properties": {
                "frontendIPConfigurations": [
                    {
                        "name": "internal-lb-ip-v4",
                        "properties": {
                            "privateIPAddress": "10.0.0.6",
                            "privateIPAllocationMethod": "Dynamic",
                            "subnet": {
                                "id": "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_acluster_ds4ts_vnet_name'), 'acluster-ds4ts-master-subnet')]"
                            },
                            "privateIPAddressVersion": "IPv4"
                        },
                        "zones": [
                            "1",
                            "2",
                            "3"
                        ]
                    }
                ],
                "backendAddressPools": [
                    {
                        "name": "acluster-ds4ts",
                        "properties": {
                            "loadBalancerBackendAddresses": [
                                {
                                    "name": "acluster-ds4ts-rg_acluster-ds4ts-master2-nicpipConfig",
                                    "properties": {}
                                },
                                {
                                    "name": "acluster-ds4ts-rg_acluster-ds4ts-master0-nicpipConfig",
                                    "properties": {}
                                },
                                {
                                    "name": "acluster-ds4ts-rg_acluster-ds4ts-master1-nicpipConfig",
                                    "properties": {}
                                }
                            ]
                        }
                    }
                ],
                "loadBalancingRules": [
                    {
                        "name": "sint-v4",
                        "properties": {
                            "frontendIPConfiguration": {
                                "id": "[concat(resourceId('Microsoft.Network/loadBalancers', parameters('loadBalancers_acluster_ds4ts_internal_name')), '/frontendIPConfigurations/internal-lb-ip-v4')]"
                            },
                            "frontendPort": 22623,
                            "backendPort": 22623,
                            "enableFloatingIP": false,
                            "idleTimeoutInMinutes": 30,
                            "protocol": "Tcp",
                            "enableTcpReset": false,
                            "loadDistribution": "Default",
                            "disableOutboundSnat": false,
                            "backendAddressPool": {
                                "id": "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_internal_name'), 'acluster-ds4ts')]"
                            },
                            "probe": {
                                "id": "[concat(resourceId('Microsoft.Network/loadBalancers', parameters('loadBalancers_acluster_ds4ts_internal_name')), '/probes/sint-probe')]"
                            }
                        }
                    },
                    {
                        "name": "api-internal-v4",
                        "properties": {
                            "frontendIPConfiguration": {
                                "id": "[concat(resourceId('Microsoft.Network/loadBalancers', parameters('loadBalancers_acluster_ds4ts_internal_name')), '/frontendIPConfigurations/internal-lb-ip-v4')]"
                            },
                            "frontendPort": 6443,
                            "backendPort": 6443,
                            "enableFloatingIP": false,
                            "idleTimeoutInMinutes": 30,
                            "protocol": "Tcp",
                            "enableTcpReset": false,
                            "loadDistribution": "Default",
                            "disableOutboundSnat": false,
                            "backendAddressPool": {
                                "id": "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_internal_name'), 'acluster-ds4ts')]"
                            },
                            "probe": {
                                "id": "[concat(resourceId('Microsoft.Network/loadBalancers', parameters('loadBalancers_acluster_ds4ts_internal_name')), '/probes/api-internal-probe')]"
                            }
                        }
                    }
                ],
                "probes": [
                    {
                        "name": "api-internal-probe",
                        "properties": {
                            "protocol": "Https",
                            "port": 6443,
                            "requestPath": "/readyz",
                            "intervalInSeconds": 5,
                            "numberOfProbes": 2
                        }
                    },
                    {
                        "name": "sint-probe",
                        "properties": {
                            "protocol": "Https",
                            "port": 22623,
                            "requestPath": "/healthz",
                            "intervalInSeconds": 5,
                            "numberOfProbes": 2
                        }
                    }
                ],
                "inboundNatRules": [],
                "outboundRules": [],
                "inboundNatPools": []
            }
        },
        {
            "type": "Microsoft.Network/networkInterfaces",
            "apiVersion": "2020-11-01",
            "name": "[parameters('networkInterfaces_acluster_ds4ts_infra_eastus1_bj4gj_nic_name')]",
            "location": "eastus",
            "dependsOn": [
                "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_acluster_ds4ts_vnet_name'), 'acluster-ds4ts-worker-subnet')]",
                "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_name'), parameters('loadBalancers_acluster_ds4ts_name'))]"
            ],
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "pipConfig",
                        "properties": {
                            "privateIPAddress": "10.0.32.5",
                            "privateIPAllocationMethod": "Dynamic",
                            "subnet": {
                                "id": "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_acluster_ds4ts_vnet_name'), 'acluster-ds4ts-worker-subnet')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4",
                            "loadBalancerBackendAddressPools": [
                                {
                                    "id": "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_name'), parameters('loadBalancers_acluster_ds4ts_name'))]"
                                }
                            ]
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": []
                },
                "enableAcceleratedNetworking": false,
                "enableIPForwarding": false
            }
        },
        {
            "type": "Microsoft.Network/networkInterfaces",
            "apiVersion": "2020-11-01",
            "name": "[parameters('networkInterfaces_acluster_ds4ts_worker_eastus1_thpfl_nic_name')]",
            "location": "eastus",
            "dependsOn": [
                "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_acluster_ds4ts_vnet_name'), 'acluster-ds4ts-worker-subnet')]",
                "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_name'), parameters('loadBalancers_acluster_ds4ts_name'))]"
            ],
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "pipConfig",
                        "properties": {
                            "privateIPAddress": "10.0.32.7",
                            "privateIPAllocationMethod": "Dynamic",
                            "subnet": {
                                "id": "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_acluster_ds4ts_vnet_name'), 'acluster-ds4ts-worker-subnet')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4",
                            "loadBalancerBackendAddressPools": [
                                {
                                    "id": "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_name'), parameters('loadBalancers_acluster_ds4ts_name'))]"
                                }
                            ]
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": []
                },
                "enableAcceleratedNetworking": false,
                "enableIPForwarding": false
            }
        },
        {
            "type": "Microsoft.Network/networkInterfaces",
            "apiVersion": "2020-11-01",
            "name": "[parameters('networkInterfaces_acluster_ds4ts_worker_eastus2_wpbg4_nic_name')]",
            "location": "eastus",
            "dependsOn": [
                "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_acluster_ds4ts_vnet_name'), 'acluster-ds4ts-worker-subnet')]",
                "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_name'), parameters('loadBalancers_acluster_ds4ts_name'))]"
            ],
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "pipConfig",
                        "properties": {
                            "privateIPAddress": "10.0.32.4",
                            "privateIPAllocationMethod": "Dynamic",
                            "subnet": {
                                "id": "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_acluster_ds4ts_vnet_name'), 'acluster-ds4ts-worker-subnet')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4",
                            "loadBalancerBackendAddressPools": [
                                {
                                    "id": "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_name'), parameters('loadBalancers_acluster_ds4ts_name'))]"
                                }
                            ]
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": []
                },
                "enableAcceleratedNetworking": false,
                "enableIPForwarding": false
            }
        },
        {
            "type": "Microsoft.Network/privateDnsZones/virtualNetworkLinks",
            "apiVersion": "2018-09-01",
            "name": "[concat(parameters('privateDnsZones_acluster_ocp_devenchoice_org_name'), '/acluster-ds4ts-network-link')]",
            "location": "global",
            "dependsOn": [
                "[resourceId('Microsoft.Network/privateDnsZones', parameters('privateDnsZones_acluster_ocp_devenchoice_org_name'))]",
                "[resourceId('Microsoft.Network/virtualNetworks', parameters('virtualNetworks_acluster_ds4ts_vnet_name'))]"
            ],
            "properties": {
                "registrationEnabled": false,
                "virtualNetwork": {
                    "id": "[resourceId('Microsoft.Network/virtualNetworks', parameters('virtualNetworks_acluster_ds4ts_vnet_name'))]"
                }
            }
        },
        {
            "type": "Microsoft.Network/virtualNetworks/subnets",
            "apiVersion": "2020-11-01",
            "name": "[concat(parameters('virtualNetworks_acluster_ds4ts_vnet_name'), '/acluster-ds4ts-master-subnet')]",
            "dependsOn": [
                "[resourceId('Microsoft.Network/virtualNetworks', parameters('virtualNetworks_acluster_ds4ts_vnet_name'))]",
                "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('networkSecurityGroups_acluster_ds4ts_nsg_name'))]"
            ],
            "properties": {
                "addressPrefix": "10.0.0.0/19",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('networkSecurityGroups_acluster_ds4ts_nsg_name'))]"
                },
                "serviceEndpoints": [],
                "delegations": [],
                "privateEndpointNetworkPolicies": "Enabled",
                "privateLinkServiceNetworkPolicies": "Enabled"
            }
        },
        {
            "type": "Microsoft.Network/virtualNetworks/subnets",
            "apiVersion": "2020-11-01",
            "name": "[concat(parameters('virtualNetworks_acluster_ds4ts_vnet_name'), '/acluster-ds4ts-worker-subnet')]",
            "dependsOn": [
                "[resourceId('Microsoft.Network/virtualNetworks', parameters('virtualNetworks_acluster_ds4ts_vnet_name'))]",
                "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('networkSecurityGroups_acluster_ds4ts_nsg_name'))]"
            ],
            "properties": {
                "addressPrefix": "10.0.32.0/19",
                "networkSecurityGroup": {
                    "id": "[resourceId('Microsoft.Network/networkSecurityGroups', parameters('networkSecurityGroups_acluster_ds4ts_nsg_name'))]"
                },
                "serviceEndpoints": [],
                "delegations": [],
                "privateEndpointNetworkPolicies": "Enabled",
                "privateLinkServiceNetworkPolicies": "Enabled"
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts/blobServices/containers",
            "apiVersion": "2021-01-01",
            "name": "[concat(parameters('storageAccounts_imageregistryaclustkm4s8_name'), '/default/acluster-ds4ts-image-registry-whrptsuplvftxhblpaelykljylvtaoqg')]",
            "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts/blobServices', parameters('storageAccounts_imageregistryaclustkm4s8_name'), 'default')]",
                "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_imageregistryaclustkm4s8_name'))]"
            ],
            "properties": {
                "defaultEncryptionScope": "$account-encryption-key",
                "denyEncryptionScopeOverride": false,
                "publicAccess": "None"
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts/blobServices/containers",
            "apiVersion": "2021-01-01",
            "name": "[concat(parameters('storageAccounts_clusterydufh_name'), '/default/bootdiagnostics-aclusterd-4ee0a6dc-5b48-4b1b-b2f2-a74dd83e9eb0')]",
            "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts/blobServices', parameters('storageAccounts_clusterydufh_name'), 'default')]",
                "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_clusterydufh_name'))]"
            ],
            "properties": {
                "defaultEncryptionScope": "$account-encryption-key",
                "denyEncryptionScopeOverride": false,
                "publicAccess": "None"
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts/blobServices/containers",
            "apiVersion": "2021-01-01",
            "name": "[concat(parameters('storageAccounts_clusterydufh_name'), '/default/bootdiagnostics-aclusterd-6346abb3-c9a4-439c-94a6-a73002b35289')]",
            "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts/blobServices', parameters('storageAccounts_clusterydufh_name'), 'default')]",
                "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_clusterydufh_name'))]"
            ],
            "properties": {
                "defaultEncryptionScope": "$account-encryption-key",
                "denyEncryptionScopeOverride": false,
                "publicAccess": "None"
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts/blobServices/containers",
            "apiVersion": "2021-01-01",
            "name": "[concat(parameters('storageAccounts_clusterydufh_name'), '/default/bootdiagnostics-aclusterd-ab7e042d-e323-4568-9122-f3096cc5b065')]",
            "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts/blobServices', parameters('storageAccounts_clusterydufh_name'), 'default')]",
                "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_clusterydufh_name'))]"
            ],
            "properties": {
                "defaultEncryptionScope": "$account-encryption-key",
                "denyEncryptionScopeOverride": false,
                "publicAccess": "None"
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts/blobServices/containers",
            "apiVersion": "2021-01-01",
            "name": "[concat(parameters('storageAccounts_clusterydufh_name'), '/default/bootdiagnostics-aclusterd-e88809d5-7660-42e5-bf94-c9d4c19789cb')]",
            "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts/blobServices', parameters('storageAccounts_clusterydufh_name'), 'default')]",
                "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_clusterydufh_name'))]"
            ],
            "properties": {
                "defaultEncryptionScope": "$account-encryption-key",
                "denyEncryptionScopeOverride": false,
                "publicAccess": "None"
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts/blobServices/containers",
            "apiVersion": "2021-01-01",
            "name": "[concat(parameters('storageAccounts_clusterydufh_name'), '/default/vhd')]",
            "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts/blobServices', parameters('storageAccounts_clusterydufh_name'), 'default')]",
                "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_clusterydufh_name'))]"
            ],
            "properties": {
                "defaultEncryptionScope": "$account-encryption-key",
                "denyEncryptionScopeOverride": false,
                "publicAccess": "None"
            }
        },
        {
            "type": "Microsoft.Compute/virtualMachines",
            "apiVersion": "2020-12-01",
            "name": "[parameters('virtualMachines_acluster_ds4ts_master_0_name')]",
            "location": "eastus",
            "dependsOn": [
                "[resourceId('Microsoft.Compute/images', parameters('images_acluster_ds4ts_name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', parameters('networkInterfaces_acluster_ds4ts_master0_nic_name'))]",
                "[resourceId('Microsoft.Storage/StorageAccounts', parameters('storageAccounts_clusterydufh_name'))]"
            ],
            "zones": [
                "2"
            ],
            "identity": {
                "type": "UserAssigned",
                "userAssignedIdentities": {
                    "/subscriptions/26b2efed-ae4f-4b8d-85ee-da05163f3f4c/resourcegroups/acluster-ds4ts-rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/acluster-ds4ts-identity": {
                        "principalId": "ca584c9a-0413-479b-bdc3-8c69f02434db",
                        "clientId": "821116bd-8527-4249-af14-71d1baf097b5"
                    }
                }
            },
            "properties": {
                "hardwareProfile": {
                    "vmSize": "Standard_D4s_v4"
                },
                "storageProfile": {
                    "imageReference": {
                        "id": "[resourceId('Microsoft.Compute/images', parameters('images_acluster_ds4ts_name'))]"
                    },
                    "osDisk": {
                        "osType": "Linux",
                        "name": "[concat(parameters('virtualMachines_acluster_ds4ts_master_0_name'), '_OSDisk')]",
                        "createOption": "FromImage",
                        "caching": "ReadOnly",
                        "writeAcceleratorEnabled": false,
                        "managedDisk": {
                            "storageAccountType": "Premium_LRS",
                            "id": "[resourceId('Microsoft.Compute/disks', concat(parameters('virtualMachines_acluster_ds4ts_master_0_name'), '_OSDisk'))]"
                        },
                        "diskSizeGB": 200
                    },
                    "dataDisks": []
                },
                "osProfile": {
                    "computerName": "[parameters('virtualMachines_acluster_ds4ts_master_0_name')]",
                    "adminUsername": "core",
                    "linuxConfiguration": {
                        "disablePasswordAuthentication": false,
                        "ssh": {
                            "publicKeys": []
                        },
                        "provisionVMAgent": true,
                        "patchSettings": {
                            "patchMode": "ImageDefault"
                        }
                    },
                    "secrets": [],
                    "allowExtensionOperations": true,
                    "requireGuestProvisionSignal": true
                },
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', parameters('networkInterfaces_acluster_ds4ts_master0_nic_name'))]",
                            "properties": {
                                "primary": true
                            }
                        }
                    ]
                },
                "diagnosticsProfile": {
                    "bootDiagnostics": {
                        "enabled": true,
                        "storageUri": "[concat('https://', parameters('storageAccounts_clusterydufh_name'), '.blob.core.windows.net/')]"
                    }
                },
                "priority": "Regular"
            }
        },
        {
            "type": "Microsoft.Compute/virtualMachines",
            "apiVersion": "2020-12-01",
            "name": "[parameters('virtualMachines_acluster_ds4ts_master_1_name')]",
            "location": "eastus",
            "dependsOn": [
                "[resourceId('Microsoft.Compute/images', parameters('images_acluster_ds4ts_name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', parameters('networkInterfaces_acluster_ds4ts_master1_nic_name'))]",
                "[resourceId('Microsoft.Storage/StorageAccounts', parameters('storageAccounts_clusterydufh_name'))]"
            ],
            "zones": [
                "3"
            ],
            "identity": {
                "type": "UserAssigned",
                "userAssignedIdentities": {
                    "/subscriptions/26b2efed-ae4f-4b8d-85ee-da05163f3f4c/resourcegroups/acluster-ds4ts-rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/acluster-ds4ts-identity": {
                        "principalId": "ca584c9a-0413-479b-bdc3-8c69f02434db",
                        "clientId": "821116bd-8527-4249-af14-71d1baf097b5"
                    }
                }
            },
            "properties": {
                "hardwareProfile": {
                    "vmSize": "Standard_D4s_v4"
                },
                "storageProfile": {
                    "imageReference": {
                        "id": "[resourceId('Microsoft.Compute/images', parameters('images_acluster_ds4ts_name'))]"
                    },
                    "osDisk": {
                        "osType": "Linux",
                        "name": "[concat(parameters('virtualMachines_acluster_ds4ts_master_1_name'), '_OSDisk')]",
                        "createOption": "FromImage",
                        "caching": "ReadOnly",
                        "writeAcceleratorEnabled": false,
                        "managedDisk": {
                            "storageAccountType": "Premium_LRS",
                            "id": "[resourceId('Microsoft.Compute/disks', concat(parameters('virtualMachines_acluster_ds4ts_master_1_name'), '_OSDisk'))]"
                        },
                        "diskSizeGB": 200
                    },
                    "dataDisks": []
                },
                "osProfile": {
                    "computerName": "[parameters('virtualMachines_acluster_ds4ts_master_1_name')]",
                    "adminUsername": "core",
                    "linuxConfiguration": {
                        "disablePasswordAuthentication": false,
                        "ssh": {
                            "publicKeys": []
                        },
                        "provisionVMAgent": true,
                        "patchSettings": {
                            "patchMode": "ImageDefault"
                        }
                    },
                    "secrets": [],
                    "allowExtensionOperations": true,
                    "requireGuestProvisionSignal": true
                },
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', parameters('networkInterfaces_acluster_ds4ts_master1_nic_name'))]",
                            "properties": {
                                "primary": true
                            }
                        }
                    ]
                },
                "diagnosticsProfile": {
                    "bootDiagnostics": {
                        "enabled": true,
                        "storageUri": "[concat('https://', parameters('storageAccounts_clusterydufh_name'), '.blob.core.windows.net/')]"
                    }
                },
                "priority": "Regular"
            }
        },
        {
            "type": "Microsoft.Compute/virtualMachines",
            "apiVersion": "2020-12-01",
            "name": "[parameters('virtualMachines_acluster_ds4ts_master_2_name')]",
            "location": "eastus",
            "dependsOn": [
                "[resourceId('Microsoft.Compute/images', parameters('images_acluster_ds4ts_name'))]",
                "[resourceId('Microsoft.Network/networkInterfaces', parameters('networkInterfaces_acluster_ds4ts_master2_nic_name'))]",
                "[resourceId('Microsoft.Storage/StorageAccounts', parameters('storageAccounts_clusterydufh_name'))]"
            ],
            "zones": [
                "1"
            ],
            "identity": {
                "type": "UserAssigned",
                "userAssignedIdentities": {
                    "/subscriptions/26b2efed-ae4f-4b8d-85ee-da05163f3f4c/resourcegroups/acluster-ds4ts-rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/acluster-ds4ts-identity": {
                        "principalId": "ca584c9a-0413-479b-bdc3-8c69f02434db",
                        "clientId": "821116bd-8527-4249-af14-71d1baf097b5"
                    }
                }
            },
            "properties": {
                "hardwareProfile": {
                    "vmSize": "Standard_D4s_v4"
                },
                "storageProfile": {
                    "imageReference": {
                        "id": "[resourceId('Microsoft.Compute/images', parameters('images_acluster_ds4ts_name'))]"
                    },
                    "osDisk": {
                        "osType": "Linux",
                        "name": "[concat(parameters('virtualMachines_acluster_ds4ts_master_2_name'), '_OSDisk')]",
                        "createOption": "FromImage",
                        "caching": "ReadOnly",
                        "writeAcceleratorEnabled": false,
                        "managedDisk": {
                            "storageAccountType": "Premium_LRS",
                            "id": "[resourceId('Microsoft.Compute/disks', concat(parameters('virtualMachines_acluster_ds4ts_master_2_name'), '_OSDisk'))]"
                        },
                        "diskSizeGB": 200
                    },
                    "dataDisks": []
                },
                "osProfile": {
                    "computerName": "[parameters('virtualMachines_acluster_ds4ts_master_2_name')]",
                    "adminUsername": "core",
                    "linuxConfiguration": {
                        "disablePasswordAuthentication": false,
                        "ssh": {
                            "publicKeys": []
                        },
                        "provisionVMAgent": true,
                        "patchSettings": {
                            "patchMode": "ImageDefault"
                        }
                    },
                    "secrets": [],
                    "allowExtensionOperations": true,
                    "requireGuestProvisionSignal": true
                },
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces', parameters('networkInterfaces_acluster_ds4ts_master2_nic_name'))]",
                            "properties": {
                                "primary": true
                            }
                        }
                    ]
                },
                "diagnosticsProfile": {
                    "bootDiagnostics": {
                        "enabled": true,
                        "storageUri": "[concat('https://', parameters('storageAccounts_clusterydufh_name'), '.blob.core.windows.net/')]"
                    }
                },
                "priority": "Regular"
            }
        },
        {
            "type": "Microsoft.Network/loadBalancers",
            "apiVersion": "2020-11-01",
            "name": "[parameters('loadBalancers_acluster_ds4ts_name')]",
            "location": "eastus",
            "dependsOn": [
                "[resourceId('Microsoft.Network/publicIPAddresses', parameters('publicIPAddresses_acluster_ds4ts_pip_v4_name'))]",
                "[resourceId('Microsoft.Network/publicIPAddresses', parameters('publicIPAddresses_acluster_ds4ts_adc7cefced2ea48948caa180bdc31545_name'))]",
                "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_name'), parameters('loadBalancers_acluster_ds4ts_name'))]"
            ],
            "sku": {
                "name": "Standard",
                "tier": "Regional"
            },
            "properties": {
                "frontendIPConfigurations": [
                    {
                        "name": "public-lb-ip-v4",
                        "properties": {
                            "privateIPAllocationMethod": "Dynamic",
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses', parameters('publicIPAddresses_acluster_ds4ts_pip_v4_name'))]"
                            },
                            "privateIPAddressVersion": "IPv4"
                        }
                    },
                    {
                        "name": "adc7cefced2ea48948caa180bdc31545",
                        "properties": {
                            "privateIPAllocationMethod": "Dynamic",
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses', parameters('publicIPAddresses_acluster_ds4ts_adc7cefced2ea48948caa180bdc31545_name'))]"
                            },
                            "privateIPAddressVersion": "IPv4"
                        }
                    }
                ],
                "backendAddressPools": [
                    {
                        "name": "[parameters('loadBalancers_acluster_ds4ts_name')]",
                        "properties": {
                            "loadBalancerBackendAddresses": [
                                {
                                    "name": "[concat(parameters('loadBalancers_acluster_ds4ts_name'), '-rg_', parameters('loadBalancers_acluster_ds4ts_name'), '-master1-nicpipConfig')]",
                                    "properties": {}
                                },
                                {
                                    "name": "[concat(parameters('loadBalancers_acluster_ds4ts_name'), '-rg_', parameters('loadBalancers_acluster_ds4ts_name'), '-master0-nicpipConfig')]",
                                    "properties": {}
                                },
                                {
                                    "name": "[concat(parameters('loadBalancers_acluster_ds4ts_name'), '-rg_', parameters('loadBalancers_acluster_ds4ts_name'), '-master2-nicpipConfig')]",
                                    "properties": {}
                                },
                                {
                                    "name": "[concat(parameters('loadBalancers_acluster_ds4ts_name'), '-rg_', parameters('loadBalancers_acluster_ds4ts_name'), '-worker-eastus1-thpfl-nicpipConfig')]",
                                    "properties": {}
                                },
                                {
                                    "name": "[concat(parameters('loadBalancers_acluster_ds4ts_name'), '-rg_', parameters('loadBalancers_acluster_ds4ts_name'), '-worker-eastus2-wpbg4-nicpipConfig')]",
                                    "properties": {}
                                },
                                {
                                    "name": "[concat(parameters('loadBalancers_acluster_ds4ts_name'), '-rg_', parameters('loadBalancers_acluster_ds4ts_name'), '-infra-eastus1-bj4gj-nicpipConfig')]",
                                    "properties": {}
                                }
                            ]
                        }
                    }
                ],
                "loadBalancingRules": [
                    {
                        "name": "api-internal-v4",
                        "properties": {
                            "frontendIPConfiguration": {
                                "id": "[concat(resourceId('Microsoft.Network/loadBalancers', parameters('loadBalancers_acluster_ds4ts_name')), '/frontendIPConfigurations/public-lb-ip-v4')]"
                            },
                            "frontendPort": 6443,
                            "backendPort": 6443,
                            "enableFloatingIP": false,
                            "idleTimeoutInMinutes": 30,
                            "protocol": "Tcp",
                            "enableTcpReset": false,
                            "loadDistribution": "Default",
                            "disableOutboundSnat": false,
                            "backendAddressPool": {
                                "id": "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_name'), parameters('loadBalancers_acluster_ds4ts_name'))]"
                            },
                            "probe": {
                                "id": "[concat(resourceId('Microsoft.Network/loadBalancers', parameters('loadBalancers_acluster_ds4ts_name')), '/probes/api-internal-probe')]"
                            }
                        }
                    },
                    {
                        "name": "adc7cefced2ea48948caa180bdc31545-TCP-80",
                        "properties": {
                            "frontendIPConfiguration": {
                                "id": "[concat(resourceId('Microsoft.Network/loadBalancers', parameters('loadBalancers_acluster_ds4ts_name')), '/frontendIPConfigurations/adc7cefced2ea48948caa180bdc31545')]"
                            },
                            "frontendPort": 80,
                            "backendPort": 80,
                            "enableFloatingIP": true,
                            "idleTimeoutInMinutes": 4,
                            "protocol": "Tcp",
                            "enableTcpReset": true,
                            "loadDistribution": "Default",
                            "disableOutboundSnat": false,
                            "backendAddressPool": {
                                "id": "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_name'), parameters('loadBalancers_acluster_ds4ts_name'))]"
                            },
                            "probe": {
                                "id": "[concat(resourceId('Microsoft.Network/loadBalancers', parameters('loadBalancers_acluster_ds4ts_name')), '/probes/adc7cefced2ea48948caa180bdc31545-TCP-80')]"
                            }
                        }
                    },
                    {
                        "name": "adc7cefced2ea48948caa180bdc31545-TCP-443",
                        "properties": {
                            "frontendIPConfiguration": {
                                "id": "[concat(resourceId('Microsoft.Network/loadBalancers', parameters('loadBalancers_acluster_ds4ts_name')), '/frontendIPConfigurations/adc7cefced2ea48948caa180bdc31545')]"
                            },
                            "frontendPort": 443,
                            "backendPort": 443,
                            "enableFloatingIP": true,
                            "idleTimeoutInMinutes": 4,
                            "protocol": "Tcp",
                            "enableTcpReset": true,
                            "loadDistribution": "Default",
                            "disableOutboundSnat": false,
                            "backendAddressPool": {
                                "id": "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_name'), parameters('loadBalancers_acluster_ds4ts_name'))]"
                            },
                            "probe": {
                                "id": "[concat(resourceId('Microsoft.Network/loadBalancers', parameters('loadBalancers_acluster_ds4ts_name')), '/probes/adc7cefced2ea48948caa180bdc31545-TCP-443')]"
                            }
                        }
                    }
                ],
                "probes": [
                    {
                        "name": "api-internal-probe",
                        "properties": {
                            "protocol": "Https",
                            "port": 6443,
                            "requestPath": "/readyz",
                            "intervalInSeconds": 5,
                            "numberOfProbes": 2
                        }
                    },
                    {
                        "name": "adc7cefced2ea48948caa180bdc31545-TCP-80",
                        "properties": {
                            "protocol": "Http",
                            "port": 30600,
                            "requestPath": "/healthz",
                            "intervalInSeconds": 5,
                            "numberOfProbes": 2
                        }
                    },
                    {
                        "name": "adc7cefced2ea48948caa180bdc31545-TCP-443",
                        "properties": {
                            "protocol": "Http",
                            "port": 30600,
                            "requestPath": "/healthz",
                            "intervalInSeconds": 5,
                            "numberOfProbes": 2
                        }
                    }
                ],
                "inboundNatRules": [],
                "outboundRules": [],
                "inboundNatPools": []
            }
        },
        {
            "type": "Microsoft.Network/networkInterfaces",
            "apiVersion": "2020-11-01",
            "name": "[parameters('networkInterfaces_acluster_ds4ts_master0_nic_name')]",
            "location": "eastus",
            "dependsOn": [
                "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_acluster_ds4ts_vnet_name'), 'acluster-ds4ts-master-subnet')]",
                "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_name'), parameters('loadBalancers_acluster_ds4ts_name'))]",
                "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_internal_name'), 'acluster-ds4ts')]"
            ],
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "pipConfig",
                        "properties": {
                            "privateIPAddress": "10.0.0.7",
                            "privateIPAllocationMethod": "Dynamic",
                            "subnet": {
                                "id": "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_acluster_ds4ts_vnet_name'), 'acluster-ds4ts-master-subnet')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4",
                            "loadBalancerBackendAddressPools": [
                                {
                                    "id": "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_name'), parameters('loadBalancers_acluster_ds4ts_name'))]"
                                },
                                {
                                    "id": "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_internal_name'), 'acluster-ds4ts')]"
                                }
                            ]
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": []
                },
                "enableAcceleratedNetworking": false,
                "enableIPForwarding": false
            }
        },
        {
            "type": "Microsoft.Network/networkInterfaces",
            "apiVersion": "2020-11-01",
            "name": "[parameters('networkInterfaces_acluster_ds4ts_master1_nic_name')]",
            "location": "eastus",
            "dependsOn": [
                "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_acluster_ds4ts_vnet_name'), 'acluster-ds4ts-master-subnet')]",
                "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_name'), parameters('loadBalancers_acluster_ds4ts_name'))]",
                "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_internal_name'), 'acluster-ds4ts')]"
            ],
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "pipConfig",
                        "properties": {
                            "privateIPAddress": "10.0.0.5",
                            "privateIPAllocationMethod": "Dynamic",
                            "subnet": {
                                "id": "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_acluster_ds4ts_vnet_name'), 'acluster-ds4ts-master-subnet')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4",
                            "loadBalancerBackendAddressPools": [
                                {
                                    "id": "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_name'), parameters('loadBalancers_acluster_ds4ts_name'))]"
                                },
                                {
                                    "id": "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_internal_name'), 'acluster-ds4ts')]"
                                }
                            ]
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": []
                },
                "enableAcceleratedNetworking": false,
                "enableIPForwarding": false
            }
        },
        {
            "type": "Microsoft.Network/networkInterfaces",
            "apiVersion": "2020-11-01",
            "name": "[parameters('networkInterfaces_acluster_ds4ts_master2_nic_name')]",
            "location": "eastus",
            "dependsOn": [
                "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_acluster_ds4ts_vnet_name'), 'acluster-ds4ts-master-subnet')]",
                "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_name'), parameters('loadBalancers_acluster_ds4ts_name'))]",
                "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_internal_name'), 'acluster-ds4ts')]"
            ],
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "pipConfig",
                        "properties": {
                            "privateIPAddress": "10.0.0.4",
                            "privateIPAllocationMethod": "Dynamic",
                            "subnet": {
                                "id": "[resourceId('Microsoft.Network/virtualNetworks/subnets', parameters('virtualNetworks_acluster_ds4ts_vnet_name'), 'acluster-ds4ts-master-subnet')]"
                            },
                            "primary": true,
                            "privateIPAddressVersion": "IPv4",
                            "loadBalancerBackendAddressPools": [
                                {
                                    "id": "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_name'), parameters('loadBalancers_acluster_ds4ts_name'))]"
                                },
                                {
                                    "id": "[resourceId('Microsoft.Network/loadBalancers/backendAddressPools', parameters('loadBalancers_acluster_ds4ts_internal_name'), 'acluster-ds4ts')]"
                                }
                            ]
                        }
                    }
                ],
                "dnsSettings": {
                    "dnsServers": []
                },
                "enableAcceleratedNetworking": false,
                "enableIPForwarding": false
            }
        }
    ]
}
